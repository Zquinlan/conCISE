TRUE ~ 0),
totalFeatures = 1,
libraryMatched = sum(libraryMatched)/sum(totalFeatures),
EcoNetMatched = sum(EcoNetMatched)/sum(totalFeatures))%>%
select(experiment, libraryMatched, EcoNetMatched)%>%
unique()
head(annotationRate)
View(combined)
# ANALYSIS -- Annotation Rate ---------------------------------------------
annotationRate <- baseDf%>%
filter(version == 'unmodified')%>%
# select(feature_number, experiment, libraryID, ecoNetConsensus)
group_by(experiment)%>%
mutate(libraryMatched = case_when(!is.na(libraryID) ~ 1,
TRUE ~ 0),
EcoNetMatched = case_when(!is.na(ecoNetConsensus) ~ 1,
TRUE ~ 0),
totalFeatures = 1,
libraryMatchedPercent = sum(libraryMatched)/sum(totalFeatures),
EcoNetMatchedPercent = sum(EcoNetMatched)/sum(totalFeatures))%>%
select(experiment, totalFeatures, libraryMatched, libraryMatchedPercent, EcoNetMatchedPercent, EcoNetMatched)%>%
unique()
head(annotationsR)
head(annotationRate)
# ANALYSIS -- Annotation Rate ---------------------------------------------
annotationRate <- baseDf%>%
filter(version == 'unmodified')%>%
# select(feature_number, experiment, libraryID, ecoNetConsensus)
group_by(experiment)%>%
mutate(libraryMatched = case_when(!is.na(libraryID) ~ 1,
TRUE ~ 0),
EcoNetMatched = case_when(!is.na(ecoNetConsensus) ~ 1,
TRUE ~ 0),
totalFeatures = 1,
totalFeatures = sum(totalFeatures),
libraryMatchedPercent = sum(libraryMatched)/sum(totalFeatures),
EcoNetMatchedPercent = sum(EcoNetMatched)/sum(totalFeatures))%>%
select(experiment, totalFeatures, libraryMatchedPercent, EcoNetMatchedPercent)%>%
unique()
head(annotationRate)
# ANALYSIS -- Annotation Rate ---------------------------------------------
annotationRate <- baseDf%>%
filter(version == 'unmodified')%>%
# select(feature_number, experiment, libraryID, ecoNetConsensus)
group_by(experiment)%>%
mutate(libraryMatched = case_when(!is.na(libraryID) ~ 1,
TRUE ~ 0),
EcoNetMatched = case_when(!is.na(ecoNetConsensus) ~ 1,
TRUE ~ 0),
totalFeatures = 1,
totalFeatures = sum(totalFeatures),
libraryMatchedPercent = sum(libraryMatched)/totalFeatures,
EcoNetMatchedPercent = sum(EcoNetMatched)/totalFeatures)%>%
select(experiment, totalFeatures, libraryMatchedPercent, EcoNetMatchedPercent)%>%
unique()
head(annotationRate)
head(baseDf )
# ANALYSIS -- Annotation Rate ---------------------------------------------
annotationRate <- baseDf%>%
filter(version == 'unmodified')%>%
select(-feature_number)%>%
unique()%>%
group_by(experiment)%>%
mutate(libraryMatched = case_when(!is.na(libraryID) ~ 1,
TRUE ~ 0),
EcoNetMatched = case_when(!is.na(ecoNetConsensus) ~ 1,
TRUE ~ 0),
totalFeatures = 1,
totalFeatures = sum(totalFeatures),
libraryMatchedPercent = sum(libraryMatched)/totalFeatures,
EcoNetMatchedPercent = sum(EcoNetMatched)/totalFeatures)%>%
select(experiment, totalFeatures, libraryMatchedPercent, EcoNetMatchedPercent)%>%
unique()
head(baseDf )
head(annotationRate)
# ANALYSIS -- Annotation Rate ---------------------------------------------
annotationRate <- baseDf%>%
filter(version == 'unmodified')%>%
mutate(net_act = case_when(network == -1 ~ -as.numeric(feature_number),
TRUE ~ network))%>%
select(-feature_number)%>%
unique()%>%
group_by(experiment)%>%
mutate(libraryMatched = case_when(!is.na(libraryID) ~ 1,
TRUE ~ 0),
EcoNetMatched = case_when(!is.na(ecoNetConsensus) ~ 1,
TRUE ~ 0),
totalFeatures = 1,
totalFeatures = sum(totalFeatures),
libraryMatchedPercent = sum(libraryMatched)/totalFeatures,
EcoNetMatchedPercent = sum(EcoNetMatched)/totalFeatures)%>%
select(experiment, totalFeatures, libraryMatchedPercent, EcoNetMatchedPercent)%>%
unique()
head(annotationRate)
# ANALYSIS -- Annotation Rate ---------------------------------------------
annotationRate <- baseDf%>%
filter(version == 'unmodified',
network != -1)%>%
select(-feature_number)%>%
unique()%>%
group_by(experiment)%>%
mutate(libraryMatched = case_when(!is.na(libraryID) ~ 1,
TRUE ~ 0),
EcoNetMatched = case_when(!is.na(ecoNetConsensus) ~ 1,
TRUE ~ 0),
totalFeatures = 1,
totalFeatures = sum(totalFeatures),
libraryMatchedPercent = sum(libraryMatched)/totalFeatures,
EcoNetMatchedPercent = sum(EcoNetMatched)/totalFeatures)%>%
select(experiment, totalFeatures, libraryMatchedPercent, EcoNetMatchedPercent)%>%
unique()
head(annotationRate)
# ANALYSIS -- Annotation Rate ---------------------------------------------
annotationRate <- baseDf%>%
filter(version == 'unmodified')%>%
# network != -1)%>%
# select(-feature_number)%>%
# unique()%>%
group_by(experiment)%>%
mutate(libraryMatched = case_when(!is.na(libraryID) ~ 1,
TRUE ~ 0),
EcoNetMatched = case_when(!is.na(ecoNetConsensus) ~ 1,
TRUE ~ 0),
totalFeatures = 1,
totalFeatures = sum(totalFeatures),
libraryMatchedPercent = sum(libraryMatched)/totalFeatures,
EcoNetMatchedPercent = sum(EcoNetMatched)/totalFeatures)%>%
select(experiment, totalFeatures, libraryMatchedPercent, EcoNetMatchedPercent)%>%
unique()
head(annotationRate)
mean(c(6.78, 4, 2.25))
sd(c(6.78, 4, 2.25))
mean(c(39.2, 37.8, 33))
sd(c(39.2, 37.8, 33))
# ANALYSIS -- Annotation Rate ---------------------------------------------
annotationRate <- baseDf%>%
filter(version == 'unmodified',
network != -1)%>%
select(-feature_number)%>%
unique()%>%
group_by(experiment)%>%
mutate(libraryMatched = case_when(!is.na(libraryID) ~ 1,
TRUE ~ 0),
EcoNetMatched = case_when(!is.na(ecoNetConsensus) ~ 1,
TRUE ~ 0),
totalFeatures = 1,
totalFeatures = sum(totalFeatures),
libraryMatchedPercent = sum(libraryMatched)/totalFeatures,
EcoNetMatchedPercent = sum(EcoNetMatched)/totalFeatures)%>%
select(experiment, totalFeatures, libraryMatchedPercent, EcoNetMatchedPercent)%>%
unique()
head(annotationRate)
mean(c(10.4, 8.55, 5.69))
sd(c(10.4, 8.55, 5.69))
mean(c(58.6, 56.3, 76.5))
sd(c(58.6, 56.3, 76.5))
# ANALYSIS -- Annotation Rate ---------------------------------------------
annotationRate <- baseDf%>%
filter(version == 'unmodified',
network != -1)%>%
# select(-feature_number)%>%
# unique()%>%
group_by(experiment)%>%
mutate(libraryMatched = case_when(!is.na(libraryID) ~ 1,
TRUE ~ 0),
EcoNetMatched = case_when(!is.na(ecoNetConsensus) ~ 1,
TRUE ~ 0),
totalFeatures = 1,
totalFeatures = sum(totalFeatures),
libraryMatchedPercent = sum(libraryMatched)/totalFeatures,
EcoNetMatchedPercent = sum(EcoNetMatched)/totalFeatures)%>%
select(experiment, totalFeatures, libraryMatchedPercent, EcoNetMatchedPercent)%>%
unique()
head()
head(annotationRate)
# ANALYSIS -- Annotation Rate ---------------------------------------------
annotationRate <- baseDf%>%
filter(version == 'unmodified',
network != -1)%>%
select(-feature_number)%>%
unique()%>%
group_by(experiment)%>%
mutate(libraryMatched = case_when(!is.na(libraryID) ~ 1,
TRUE ~ 0),
EcoNetMatched = case_when(!is.na(ecoNetConsensus) ~ 1,
TRUE ~ 0),
totalFeatures = 1,
totalFeatures = sum(totalFeatures),
libraryMatchedPercent = sum(libraryMatched)/totalFeatures,
EcoNetMatchedPercent = sum(EcoNetMatched)/totalFeatures,
percentIncrease = (ecoNetMatchedPercent-libraryMatchedPercent)/ecoNetMatchedPercent*100)%>%
select(experiment, totalFeatures, libraryMatchedPercent, EcoNetMatchedPercent)%>%
unique()
# ANALYSIS -- Annotation Rate ---------------------------------------------
annotationRate <- baseDf%>%
filter(version == 'unmodified',
network != -1)%>%
select(-feature_number)%>%
unique()%>%
group_by(experiment)%>%
mutate(libraryMatched = case_when(!is.na(libraryID) ~ 1,
TRUE ~ 0),
EcoNetMatched = case_when(!is.na(ecoNetConsensus) ~ 1,
TRUE ~ 0),
totalFeatures = 1,
totalFeatures = sum(totalFeatures),
libraryMatchedPercent = sum(libraryMatched)/totalFeatures,
EcoNetMatchedPercent = sum(EcoNetMatched)/totalFeatures,
percentIncrease = (EcoNetMatchedPercent-libraryMatchedPercent)/EcoNetMatchedPercent*100)%>%
select(experiment, totalFeatures, libraryMatchedPercent, EcoNetMatchedPercent, percentIncrease)%>%
unique()
head(annotationRate)
# ANALYSIS -- Annotation Rate ---------------------------------------------
annotationRate <- baseDf%>%
filter(version == 'unmodified',
network != -1)%>%
select(-feature_number)%>%
unique()%>%
group_by(experiment)%>%
mutate(libraryMatched = case_when(!is.na(libraryID) ~ 1,
TRUE ~ 0),
EcoNetMatched = case_when(!is.na(ecoNetConsensus) ~ 1,
TRUE ~ 0),
totalFeatures = 1,
totalFeatures = sum(totalFeatures),
libraryMatchedPercent = sum(libraryMatched)/totalFeatures,
EcoNetMatchedPercent = sum(EcoNetMatched)/totalFeatures,
percentIncrease = (EcoNetMatchedPercent-libraryMatchedPercent)/libraryMatchedPercent*100)%>%
select(experiment, totalFeatures, libraryMatchedPercent, EcoNetMatchedPercent, percentIncrease)%>%
unique()
head(annotationRate)
# ANALYSIS -- Annotation Rate ---------------------------------------------
annotationRate <- baseDf%>%
filter(version == 'unmodified')%>%
#        network != -1)%>%
# select(-feature_number)%>%
# unique()%>%
group_by(experiment)%>%
mutate(libraryMatched = case_when(!is.na(libraryID) ~ 1,
TRUE ~ 0),
EcoNetMatched = case_when(!is.na(ecoNetConsensus) ~ 1,
TRUE ~ 0),
totalFeatures = 1,
totalFeatures = sum(totalFeatures),
libraryMatchedPercent = sum(libraryMatched)/totalFeatures,
EcoNetMatchedPercent = sum(EcoNetMatched)/totalFeatures,
percentIncrease = (EcoNetMatchedPercent-libraryMatchedPercent)/libraryMatchedPercent*100)%>%
select(experiment, totalFeatures, libraryMatchedPercent, EcoNetMatchedPercent, percentIncrease)%>%
unique()
head(annotationRate)
# ANALYSIS -- Annotation Rate ---------------------------------------------
annotationRate <- baseDf%>%
filter(version == 'unmodified',
network != -1)%>%
select(-feature_number)%>%
unique()%>%
group_by(experiment)%>%
mutate(libraryMatched = case_when(!is.na(libraryID) ~ 1,
TRUE ~ 0),
EcoNetMatched = case_when(!is.na(ecoNetConsensus) ~ 1,
TRUE ~ 0),
totalFeatures = 1,
totalFeatures = sum(totalFeatures),
libraryMatchedPercent = sum(libraryMatched)/totalFeatures,
EcoNetMatchedPercent = sum(EcoNetMatched)/totalFeatures,
percentIncrease = (EcoNetMatchedPercent-libraryMatchedPercent)/libraryMatchedPercent*100)%>%
select(experiment, totalFeatures, libraryMatchedPercent, EcoNetMatchedPercent, percentIncrease)%>%
unique()
head(annotationRate)
rawEcoNet <- read_csv('~/Downloads/EconetVerification - compareIdEconet.csv')%>%
rename(checkCanopus = `manual check - CANOPUS`,
checkLibrary = `manual check - Library`)%>%
mutate(checkLibrary = case_when(checkLibrary == 'correct - sesquiterpene' ~ 'correct',
checkLibrary == 'correct?' ~ 'correct',
checkLibrary == 'not correct?' ~ 'incorrect',
checkLibrary == 'Not correct?' ~ 'incorrect',
checkLibrary == 'incorrect?' ~ 'incorrect',
checkLibrary == '?' ~ 'unknown',
checkLibrary == 'correct (norterpenoid)' ~ 'correct',
TRUE ~ checkLibrary),
checkCanopus = case_when(checkCanopus == 'correct - sesquiterpene' ~ 'correct',
checkCanopus == 'correct?' ~ 'correct',
checkCanopus == 'not correct?' ~ 'incorrect',
checkCanopus == 'Not correct?' ~ 'incorrect',
checkCanopus == 'incorrect?' ~ 'incorrect',
checkCanopus == '?' ~ 'unknown',
TRUE ~ checkCanopus))
libraryCount%>%
ggplot(aes(checkLibrary, percent)) +
geom_bar(stat = 'identity') +
geom_text(aes(label = paste(round(percent*100, 2), '%')), vjust = -0.5, size = 6) +
genTheme() +
labs(y = 'Percent of annotations', x = 'Library annotation accuracy')
libraryCount <- rawEcoNet%>%
filter(!is.na(checkCanopus) & !is.na(checkLibrary))%>%
select(checkLibrary)%>%
group_by(checkLibrary)%>%
mutate(libraryCorrect = 1)%>%
summarize_if(is.numeric, sum)%>%
ungroup()%>%
mutate(percent = libraryCorrect/sum(libraryCorrect))
libraryCount%>%
ggplot(aes(checkLibrary, percent)) +
geom_bar(stat = 'identity') +
geom_text(aes(label = paste(round(percent*100, 2), '%')), vjust = -0.5, size = 6) +
genTheme() +
labs(y = 'Percent of annotations', x = 'Library annotation accuracy')
libraryCount%>%
ggplot(aes(checkLibrary, percent)) +
geom_bar(stat = 'identity') +
geom_text(aes(label = paste(round(percent*100, 2), '%')), vjust = -0.5, size = 6) +
# genTheme() +
labs(y = 'Percent of annotations', x = 'Library annotation accuracy')
head(rawEcoNet)
canopusCount <- rawEcoNet%>%
filter(!is.na(checkCanopus) & !is.na(checkLibrary))%>%
select(checkCanopus, ecoNetConsensusLevelCanopus)%>%
group_by(dataset, checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(canopusCount = 1)%>%
summarize_if(is.numeric, sum)%>%
ungroup()%>%
group_by(dataset, ecoNetConsensusLevelCanopus)%>%
mutate(percent = canopusCount/sum(canopusCount))%>%
group_by(checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(std = sd(percent))%>%
summarize_if(is.numeric, mean))%>%
ungroup()
canopusCount <- rawEcoNet%>%
filter(!is.na(checkCanopus) & !is.na(checkLibrary))%>%
select(checkCanopus, ecoNetConsensusLevelCanopus)%>%
group_by(dataset, checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(canopusCount = 1)%>%
summarize_if(is.numeric, sum)%>%
ungroup()%>%
group_by(dataset, ecoNetConsensusLevelCanopus)%>%
mutate(percent = canopusCount/sum(canopusCount))%>%
group_by(checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(std = sd(percent))%>%
summarize_if(is.numeric, mean)%>%
ungroup()
canopusCount <- rawEcoNet%>%
filter(!is.na(checkCanopus) & !is.na(checkLibrary))%>%
select(dataset, checkCanopus, ecoNetConsensusLevelCanopus)%>%
group_by(dataset, checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(canopusCount = 1)%>%
summarize_if(is.numeric, sum)%>%
ungroup()%>%
group_by(dataset, ecoNetConsensusLevelCanopus)%>%
mutate(percent = canopusCount/sum(canopusCount))%>%
group_by(checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(std = sd(percent))%>%
summarize_if(is.numeric, mean)%>%
ungroup()
head(rawEcoNet)
canopusCount <- rawEcoNet%>%
filter(!is.na(checkCanopus) & !is.na(checkLibrary))%>%
select(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
group_by(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(canopusCount = 1)%>%
summarize_if(is.numeric, sum)%>%
ungroup()%>%
group_by(experiment, ecoNetConsensusLevelCanopus)%>%
mutate(percent = canopusCount/sum(canopusCount))%>%
group_by(checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(std = sd(percent))%>%
summarize_if(is.numeric, mean)%>%
ungroup()
head(canopusCount)
canopusCount <- rawEcoNet%>%
filter(!is.na(checkCanopus) | !is.na(checkLibrary))%>%
select(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
group_by(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(canopusCount = 1)%>%
summarize_if(is.numeric, sum)%>%
ungroup()%>%
group_by(experiment, ecoNetConsensusLevelCanopus)%>%
mutate(percent = canopusCount/sum(canopusCount))%>%
group_by(checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(std = sd(percent))%>%
summarize_if(is.numeric, mean)%>%
ungroup()
head(canopusCount)
canopusCount <- rawEcoNet%>%
filter(!is.na(checkCanopus), !is.na(checkLibrary))%>%
select(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
group_by(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(canopusCount = 1)%>%
summarize_if(is.numeric, sum)%>%
ungroup()%>%
group_by(experiment, ecoNetConsensusLevelCanopus)%>%
mutate(percent = canopusCount/sum(canopusCount))%>%
group_by(checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(std = sd(percent))%>%
summarize_if(is.numeric, mean)%>%
ungroup()
head(canopusCount)
canopusCount <- rawEcoNet%>%
filter(!is.na(checkCanopus),
!is.na(checkLibrary),
!is.na(ecoNetConsensusLevelCanopus))%>%
select(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
group_by(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(canopusCount = 1)%>%
summarize_if(is.numeric, sum)%>%
ungroup()%>%
group_by(experiment, ecoNetConsensusLevelCanopus)%>%
mutate(percent = canopusCount/sum(canopusCount))%>%
group_by(checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(std = sd(percent))%>%
summarize_if(is.numeric, mean)%>%
ungroup()
head(canopusCount)
canopusCount%>%
mutate(ecoNetConsensusLevelCanopus = as.factor(ecoNetConsensusLevelCanopus),
ecoNetConsensusLevelCanopus = fct_relevel(ecoNetConsensusLevelCanopus, 'superclass'))%>%
ggplot(aes(checkCanopus, percent, fill = ecoNetConsensusLevelCanopus)) +
geom_errorbar(aes(ymax = percent + std, ymin = percent - std), position = 'dodge') +
geom_bar(stat = 'identity', position = 'dodge') +
geom_text(aes(label = paste(round(percent*100, 2), '%')), position = position_dodge2(width = 1), vjust = -0.5, size = 6) +
genTheme() +
scale_fill_manual(values = wes_palette('Zissou1', 5, 'discrete')) +
labs(y = 'Percent of annotations', x = 'Putative annotation accuracy', fill = 'EcoNet Consensus Level')
genTheme <- function(x) {
theme(
legend.position = "top",
legend.text = element_text(size = 20),
legend.title = element_text(size = 25),
legend.key = element_rect(fill = "transparent"),
legend.key.size = unit(3, 'line'),
legend.box= "vertical",
plot.margin = unit(c(1,1,1.5,1.2), 'cm'),
# plot.margin = margin(2,.8,2,.8, "cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title = element_text(size = 30),
panel.background = element_rect(fill = "transparent"), # bg of the panel
plot.background = element_rect(fill = "transparent", color = NA), # bg of the plot
panel.grid.major = element_blank(), # get rid of major grid
panel.grid.minor = element_blank()) # get rid of minor grid
}
canopusCount%>%
mutate(ecoNetConsensusLevelCanopus = as.factor(ecoNetConsensusLevelCanopus),
ecoNetConsensusLevelCanopus = fct_relevel(ecoNetConsensusLevelCanopus, 'superclass'))%>%
ggplot(aes(checkCanopus, percent, fill = ecoNetConsensusLevelCanopus)) +
geom_errorbar(aes(ymax = percent + std, ymin = percent - std), position = 'dodge') +
geom_bar(stat = 'identity', position = 'dodge') +
geom_text(aes(label = paste(round(percent*100, 2), '%')), position = position_dodge2(width = 1), vjust = -0.5, size = 6) +
genTheme() +
scale_fill_manual(values = wes_palette('Zissou1', 5, 'discrete')) +
labs(y = 'Percent of annotations', x = 'Putative annotation accuracy', fill = 'EcoNet Consensus Level')
canopusCount <- rawEcoNet%>%
filter(!is.na(checkCanopus),
!is.na(checkLibrary),
!is.na(ecoNetConsensusLevelCanopus))%>%
select(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
group_by(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(canopusCount = 1)%>%
summarize_if(is.numeric, sum)%>%
ungroup()%>%
group_by(experiment, ecoNetConsensusLevelCanopus)%>%
mutate(percent = canopusCount/sum(canopusCount)*100)%>%
group_by(checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(std = sd(percent))%>%
summarize_if(is.numeric, mean)%>%
ungroup()
canopusCount%>%
mutate(ecoNetConsensusLevelCanopus = as.factor(ecoNetConsensusLevelCanopus),
ecoNetConsensusLevelCanopus = fct_relevel(ecoNetConsensusLevelCanopus, 'superclass'))%>%
ggplot(aes(checkCanopus, percent, fill = ecoNetConsensusLevelCanopus)) +
geom_errorbar(aes(ymax = percent + std, ymin = percent - std), position = 'dodge') +
geom_bar(stat = 'identity', position = 'dodge') +
geom_text(aes(label = paste(round(percent, 2), '%')), position = position_dodge2(width = 1), vjust = -0.5, size = 6) +
genTheme() +
scale_fill_manual(values = wes_palette('Zissou1', 5, 'discrete')) +
labs(y = 'Percent of annotations', x = 'Putative annotation accuracy', fill = 'EcoNet Consensus Level')
View(canopusCount)
canopusCount <- rawEcoNet%>%
filter(!is.na(checkCanopus),
!is.na(checkLibrary),
!is.na(ecoNetConsensusLevelCanopus))%>%
select(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
group_by(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(canopusCount = 1)%>%
summarize_if(is.numeric, sum)%>%
ungroup()
View(canopusCount)
canopusCount <- rawEcoNet%>%
filter(!is.na(checkCanopus),
!is.na(checkLibrary),
!is.na(ecoNetConsensusLevelCanopus))%>%
select(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
group_by(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(canopusCount = 1)%>%
summarize_if(is.numeric, sum)%>%
ungroup()%>%
group_by(experiment, ecoNetConsensusLevelCanopus)%>%
mutate(percent = canopusCount/sum(canopusCount)*100)
canopusCount <- rawEcoNet%>%
filter(!is.na(checkCanopus),
!is.na(checkLibrary),
!is.na(ecoNetConsensusLevelCanopus))%>%
select(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
group_by(experiment, checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(canopusCount = 1)%>%
summarize_if(is.numeric, sum)%>%
ungroup()%>%
group_by(experiment, ecoNetConsensusLevelCanopus)%>%
mutate(percent = canopusCount/sum(canopusCount)*100)%>%
group_by(checkCanopus, ecoNetConsensusLevelCanopus)%>%
mutate(std = sd(percent))%>%
summarize_if(is.numeric, mean)%>%
ungroup()
